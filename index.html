<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Halbleiter â€“ Was kann ich schon?</title>

  <style>
    :root {
      --bg: #070d1a;
      --card-border: rgba(255, 255, 255, 0.20);
      --text: rgba(255, 255, 255, 0.98);
      --muted: rgba(255, 255, 255, 0.86);
      --muted2: rgba(255, 255, 255, 0.72);
      --green: #16a34a;
      --green2: #22c55e;
      --red: #dc2626;
      --red2: #ef4444;
      --accent: #3b82f6;
      --accent2: #60a5fa;
      --shadow: 0 20px 60px rgba(0, 0, 0, 0.45);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 820px at 18% 10%, rgba(96,165,250,0.22), transparent 58%),
        radial-gradient(1000px 760px at 88% 12%, rgba(34,197,94,0.18), transparent 62%),
        radial-gradient(1000px 760px at 55% 95%, rgba(239,68,68,0.14), transparent 62%),
        var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 40px 16px;
    }

    /* Formelschrift (wenn auf dem System vorhanden) */
    .math {
      font-family: "Cambria Math", "STIX Two Math", "Latin Modern Math", "Times New Roman", serif;
      letter-spacing: 0.2px;
      white-space: nowrap;
    }
    .math sub {
      font-size: 0.75em;
      vertical-align: -0.25em;
    }

    .wrap { max-width: 1020px; margin: 0 auto; }

    header {
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      gap: 16px;
      flex-wrap: wrap;
      margin-bottom: 18px;
    }

    h1 { margin: 0; font-size: 32px; letter-spacing: 0.2px; }

    .subtitle {
      margin-top: 8px;
      color: var(--muted);
      font-size: 17px;
      max-width: 780px;
    }

    .pillrow { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }

    .pill {
      border: 1px solid var(--card-border);
      background: rgba(255,255,255,0.09);
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 13px;
      color: var(--muted);
      backdrop-filter: blur(10px);
    }

    .card {
      border: 1px solid var(--card-border);
      background: linear-gradient(180deg, rgba(255,255,255,0.11), rgba(255,255,255,0.06));
      border-radius: 20px;
      padding: 20px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
    }

    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }

    .controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    .toggle {
      display: inline-flex;
      gap: 10px;
      align-items: center;
      padding: 9px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.20);
      background: rgba(0,0,0,0.18);
      color: var(--muted);
      font-size: 14px;
      cursor: pointer;
      user-select: none;
    }

    .toggle input {
      width: 18px;
      height: 18px;
      accent-color: var(--accent2);
    }

    .progresswrap { display: grid; gap: 7px; min-width: 280px; }

    .progressline {
      width: 100%;
      height: 12px;
      border-radius: 999px;
      background: rgba(255,255,255,0.14);
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.16);
    }

    .bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, rgba(96,165,250,0.99), rgba(34,197,94,0.99));
      border-radius: 999px;
      transition: width 220ms ease;
    }

    .progressmeta {
      font-size: 13px;
      color: var(--muted2);
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .statement {
      font-size: 24px;
      line-height: 1.55;
      padding: 18px 16px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(0,0,0,0.20);
    }

    .actions {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 16px;
    }

    .btn {
      border: 1px solid rgba(255,255,255,0.20);
      color: rgba(255,255,255,0.99);
      padding: 12px 16px;
      border-radius: 14px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 800;
      transition: transform 80ms ease, filter 160ms ease;
      user-select: none;
    }

    .btn:hover { filter: brightness(1.06); }
    .btn:active { transform: scale(0.985); }
    .btn[disabled] { opacity: 0.55; cursor: not-allowed; }

    .btn-true {
      border-color: rgba(34,197,94,0.75);
      background: linear-gradient(180deg, rgba(34,197,94,1.0), rgba(22,163,74,0.98));
      box-shadow: 0 10px 28px rgba(34,197,94,0.22);
    }

    .btn-false {
      border-color: rgba(239,68,68,0.75);
      background: linear-gradient(180deg, rgba(239,68,68,1.0), rgba(220,38,38,0.98));
      box-shadow: 0 10px 28px rgba(239,68,68,0.20);
    }

    .btn-next {
      margin-left: auto;
      border-color: rgba(96,165,250,0.80);
      background: linear-gradient(180deg, rgba(96,165,250,0.98), rgba(59,130,246,0.98));
      box-shadow: 0 10px 28px rgba(96,165,250,0.22);
    }

    .btn-soft {
      background: rgba(255,255,255,0.12);
      border-color: rgba(255,255,255,0.22);
      font-weight: 800;
    }

    .result {
      margin-top: 16px;
      padding: 16px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.08);
      display: none;
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-weight: 900;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .tag .dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: var(--accent2);
      display: inline-block;
    }

    .tag.good { color: var(--green2); }
    .tag.good .dot { background: var(--green2); }

    .tag.bad { color: var(--red2); }
    .tag.bad .dot { background: var(--red2); }

    .explain {
      color: rgba(255,255,255,0.95);
      font-size: 17px;
      line-height: 1.65;
    }

    .correction {
      margin-top: 12px;
      padding: 12px 12px;
      border-left: 4px solid rgba(96,165,250,0.98);
      background: rgba(96,165,250,0.16);
      border-radius: 12px;
      color: rgba(255,255,255,0.98);
      font-size: 17px;
      line-height: 1.6;
    }

    .footerhint { margin-top: 16px; color: var(--muted2); font-size: 13px; }

    .end {
      display: none;
      margin-top: 16px;
      padding: 18px 16px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.20);
      background: rgba(0,0,0,0.22);
    }

    .end h2 { margin: 0 0 8px 0; font-size: 20px; }

    .end .score {
      font-size: 28px;
      font-weight: 950;
      margin: 6px 0 12px 0;
      color: rgba(255,255,255,0.99);
    }

    .end .motto { color: var(--muted); font-size: 17px; line-height: 1.65; }

    @media (max-width: 520px) {
      .btn-next { margin-left: 0; width: 100%; }
      .actions { gap: 10px; }
      .statement { font-size: 21px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Halbleiter â€“ Was kann ich schon?</h1>
        <div class="subtitle">
          Eine Aussage, eine Entscheidung: <strong>Richtig</strong> oder <strong>Falsch</strong>. Direkt danach bekommst du die LÃ¶sung mit kurzer ErklÃ¤rung â€“ und (falls nÃ¶tig) eine saubere Korrektur.
        </div>
      </div>
      <div class="pillrow">
        <div class="pill" id="pillSection">â€“</div>
        <div class="pill" id="pillIndex">Aussage 1</div>
        <div class="pill" id="pillScore">Score: 0</div>
      </div>
    </header>

    <div class="card">
      <div class="topbar">
        <div class="progresswrap">
          <div class="progressline"><div class="bar" id="bar"></div></div>
          <div class="progressmeta">
            <span id="progressLeft">Frage 1 von 4</span>
            <span id="progressRight">0% erledigt</span>
          </div>
        </div>
        <div class="controls">
          <label class="toggle" title="Wenn aktiv, wird die Reihenfolge bei jedem Neustart gemischt.">
            <input type="checkbox" id="shuffleToggle" />
            Shuffle
          </label>
          <button class="btn btn-soft" id="btnRestart" onclick="restart(true)">Neu starten</button>
        </div>
      </div>

      <div class="statement" id="question">â€“</div>

      <div class="actions">
        <button class="btn btn-true" id="btnTrue" onclick="answer(true)">Richtig</button>
        <button class="btn btn-false" id="btnFalse" onclick="answer(false)">Falsch</button>
        <button class="btn btn-next" id="btnNext" onclick="nextQuestion()" disabled>NÃ¤chste â†’</button>
      </div>

      <div class="result" id="result"></div>

      <div class="end" id="end">
        <h2>Fertig ðŸŽ‰</h2>
        <div class="score" id="endScore">â€“</div>
        <div class="motto" id="endMotto">â€“</div>
        <button class="btn btn-soft" onclick="restart(true)">Nochmal spielen</button>
      </div>

      <div class="footerhint">
        Tipp: Wenn du â€žFalschâ€œ wÃ¤hlst, formuliere die Aussage kurz korrekt um (1 Satz) â€“ das bringt den grÃ¶ÃŸten Lerneffekt.
      </div>
    </div>
  </div>

  <script>
    // âœ… Fragen erweitern: Einfach weitere Objekte in dieses Array einfÃ¼gen.
    // Formeln: Nutze HTML mit <span class="math">E<sub>F</sub></span>, <span class="math">J<sub>Drift</sub></span>, <span class="math">E<sub>g</sub></span> usw.

    const BASE_QUESTIONS = [
      {
        section: "Intrinsisch/Extrinsisch",
        text: "Im intrinsischen Halbleiter gilt <span class=\"math\">n = p</span>.",
        correct: true,
        explanation: "Elektronen und LÃ¶cher entstehen paarweise als Elektron-Loch-Paare. Deshalb sind Elektronen- und Lochdichte im intrinsischen Material gleich.",
        correction: "Merksatz: Intrinsisch bedeutet <span class=\"math\">n=p=n<sub>i</sub></span>."
      },
      {
        section: "Dotierung",
        text: "Dotierung verÃ¤ndert die BandlÃ¼cke <span class=\"math\">E<sub>g</sub></span>.",
        correct: false,
        explanation: "Im Vorlesungsmodell verÃ¤ndert Dotierung die Besetzung (und damit die Lage des Fermi-Niveaus), nicht die Bandstruktur bzw. <span class=\"math\">E<sub>g</sub></span>.",
        correction: "Korrektur: Dotierung verschiebt das Fermi-Niveau <span class=\"math\">E<sub>F</sub></span>; die BandlÃ¼cke <span class=\"math\">E<sub>g</sub></span> bleibt (im Modell) unverÃ¤ndert."
      },
      {
        section: "Transport im Gleichgewicht",
        text: "Im thermischen Gleichgewicht gilt <span class=\"math\">J<sub>Drift</sub> = -J<sub>Diff</sub></span>.",
        correct: true,
        explanation: "Drift und Diffusion wirken entgegengesetzt und kompensieren sich: <span class=\"math\">J<sub>ges</sub>=J<sub>Drift</sub>+J<sub>Diff</sub>=0</span>.",
        correction: "Merksatz: Gleichgewicht heiÃŸt nicht â€˜keine Bewegungâ€™, sondern â€˜keine Netto-Stromdichteâ€™."
      },
      {
        section: "Direkt/Indirekt",
        text: "Ein indirekter Halbleiter kann kein Licht emittieren.",
        correct: false,
        explanation: "Emission ist prinzipiell mÃ¶glich, aber deutlich ineffizient, weil zur Impulserhaltung typischerweise ein Phonon beteiligt sein muss.",
        correction: "Korrektur: Indirekte Halbleiter emittieren prinzipiell, aber viel weniger effizient als direkte."
      }
    ];

    let questions = [];
    let current = 0;
    let score = 0;
    let answered = false;

    function $(id) { return document.getElementById(id); }

    function shuffleArray(arr) {
      const a = [...arr];
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function initQuestions(shouldShuffle) {
      questions = shouldShuffle ? shuffleArray(BASE_QUESTIONS) : [...BASE_QUESTIONS];
    }

    function updateHeader() {
      $("pillSection").innerText = questions[current]?.section ?? "â€“";
      $("pillIndex").innerText = `Aussage ${Math.min(current + 1, questions.length)} / ${questions.length}`;
      $("pillScore").innerText = `Score: ${score}`;

      const p = Math.round((current / questions.length) * 100);
      $("progressLeft").innerText = `Frage ${Math.min(current + 1, questions.length)} von ${questions.length}`;
      $("progressRight").innerText = `${p}% erledigt`;
      $("bar").style.width = `${p}%`;
    }

    function showQuestion() {
      answered = false;
      $("result").style.display = "none";
      $("result").innerHTML = "";
      $("end").style.display = "none";

      $("btnTrue").disabled = false;
      $("btnFalse").disabled = false;
      $("btnNext").disabled = true;

      $("question").innerHTML = questions[current].text;
      updateHeader();
    }

    function answer(choice) {
      if (answered) return;
      answered = true;

      const q = questions[current];
      const ok = (choice === q.correct);
      if (ok) score += 1;

      $("pillScore").innerText = `Score: ${score}`;

      const tagClass = ok ? "tag good" : "tag bad";
      const tagText = ok ? "Deine Antwort ist korrekt" : "Deine Antwort ist nicht korrekt";
      const solutionText = q.correct ? "Richtig" : "Falsch";
      const dot = "<span class='dot'></span>";

      const corrLabel = q.correct ? "Merksatz" : "Physikalisch richtige Formulierung";
      const corrBlock = q.correction
        ? `<div class='correction'><strong>${corrLabel}:</strong><br>${q.correction}</div>`
        : "";

      $("result").innerHTML = `
        <div class='${tagClass}'>${dot}${tagText}</div>
        <div class='explain'><strong>LÃ¶sung:</strong> ${solutionText}<br><br>${q.explanation}</div>
        ${corrBlock}
      `;
      $("result").style.display = "block";

      $("btnTrue").disabled = true;
      $("btnFalse").disabled = true;
      $("btnNext").disabled = false;
    }

    function finish() {
      $("bar").style.width = "100%";
      $("progressRight").innerText = "100% erledigt";

      const total = questions.length;
      $("endScore").innerText = `${score}/${total} richtig`;

      const ratio = score / total;
      let motto = "";
      if (ratio === 1) {
        motto = "Stark! Das sitzt. Als nÃ¤chstes: Banddiagramme skizzieren (intrinsisch, n/p-dotiert, pn-Ãœbergang).";
      } else if (ratio >= 0.75) {
        motto = "Sehr gut! Jetzt gezielt die 1â€“2 wackligen Konzepte festziehen â€“ dann bist du prÃ¼fungsbereit.";
      } else if (ratio >= 0.5) {
        motto = "Guter Zwischenstand. Tipp: Wiederhole Bandkanten + Fermi-Niveau + Drift/Diffusion (Gleichgewicht).";
      } else {
        motto = "Alles gut â€“ genau dafÃ¼r ist das Tool da. Mach eine zweite Runde und schreibe bei jeder falschen Aussage die korrekte Formulierung hin.";
      }
      $("endMotto").innerText = motto;

      $("end").style.display = "block";
      $("btnNext").disabled = true;

      $("pillSection").innerText = "Ergebnis";
      $("pillIndex").innerText = `Aussage ${questions.length} / ${questions.length}`;
      $("progressLeft").innerText = `Fertig`;
    }

    function nextQuestion() {
      if (!answered) return;
      if (current < questions.length - 1) {
        current += 1;
        showQuestion();
      } else {
        $("question").innerHTML = "Du hast alle Aussagen bearbeitet.";
        $("result").style.display = "none";
        $("btnTrue").disabled = true;
        $("btnFalse").disabled = true;
        finish();
      }
    }

    function restart(keepToggle) {
      const shouldShuffle = $("shuffleToggle").checked;
      initQuestions(shouldShuffle);
      current = 0;
      score = 0;
      $("bar").style.width = "0%";
      if (!keepToggle) $("shuffleToggle").checked = false;
      showQuestion();
    }

    // Start
    initQuestions(false);
    showQuestion();
  </script>
</body>
</html>
