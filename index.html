<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Halbleiter ‚Äì Was kann ich schon?</title>

  <style>
    :root {
      --bg: #070d1a;
      --card-border: rgba(255, 255, 255, 0.20);
      --text: rgba(255, 255, 255, 0.98);
      --muted: rgba(255, 255, 255, 0.86);
      --muted2: rgba(255, 255, 255, 0.72);
      --green: #16a34a;
      --green2: #22c55e;
      --red: #dc2626;
      --red2: #ef4444;
      --accent: #3b82f6;
      --accent2: #60a5fa;
      --shadow: 0 20px 60px rgba(0, 0, 0, 0.45);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 820px at 18% 10%, rgba(96,165,250,0.22), transparent 58%),
        radial-gradient(1000px 760px at 88% 12%, rgba(34,197,94,0.18), transparent 62%),
        radial-gradient(1000px 760px at 55% 95%, rgba(239,68,68,0.14), transparent 62%),
        var(--bg);
      color: var(--text);
      min-height: 100vh;
      padding: 40px 16px;
    }

    /* Formelschrift (wenn auf dem System vorhanden) */
    .math {
      font-family: "Cambria Math", "STIX Two Math", "Latin Modern Math", "Times New Roman", serif;
      letter-spacing: 0.2px;
      white-space: nowrap;
    }
    .math sub {
      font-size: 0.75em;
      vertical-align: -0.25em;
    }

    .wrap { max-width: 1020px; margin: 0 auto; }

    header {
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      gap: 16px;
      flex-wrap: wrap;
      margin-bottom: 18px;
    }

    h1 { margin: 0; font-size: 32px; letter-spacing: 0.2px; }

    .subtitle {
      margin-top: 8px;
      color: var(--muted);
      font-size: 17px;
      max-width: 780px;
    }

    .pillrow { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }

    .pill {
      border: 1px solid var(--card-border);
      background: rgba(255,255,255,0.09);
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 13px;
      color: var(--muted);
      backdrop-filter: blur(10px);
    }

    .card {
      border: 1px solid var(--card-border);
      background: linear-gradient(180deg, rgba(255,255,255,0.11), rgba(255,255,255,0.06));
      border-radius: 20px;
      padding: 20px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
    }

    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 14px;
    }

    .controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
    }

    .toggle {
      display: inline-flex;
      gap: 10px;
      align-items: center;
      padding: 9px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.20);
      background: rgba(0,0,0,0.18);
      color: var(--muted);
      font-size: 14px;
      cursor: pointer;
      user-select: none;
    }

    .toggle input {
      width: 18px;
      height: 18px;
      accent-color: var(--accent2);
    }

    .progresswrap { display: grid; gap: 7px; min-width: 280px; }

    .progressline {
      width: 100%;
      height: 12px;
      border-radius: 999px;
      background: rgba(255,255,255,0.14);
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.16);
    }

    .bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, rgba(96,165,250,0.99), rgba(34,197,94,0.99));
      border-radius: 999px;
      transition: width 220ms ease;
    }

    .progressmeta {
      font-size: 13px;
      color: var(--muted2);
      display: flex;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .statement {
      font-size: 24px;
      line-height: 1.55;
      padding: 18px 16px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(0,0,0,0.20);
    }

    .actions {
      display: flex;
      align-items: center;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 16px;
    }

    .btn {
      border: 1px solid rgba(255,255,255,0.20);
      color: rgba(255,255,255,0.99);
      padding: 12px 16px;
      border-radius: 14px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 800;
      transition: transform 80ms ease, filter 160ms ease;
      user-select: none;
    }

    .btn:hover { filter: brightness(1.06); }
    .btn:active { transform: scale(0.985); }
    .btn[disabled] { opacity: 0.55; cursor: not-allowed; }

    .btn-true {
      border-color: rgba(34,197,94,0.75);
      background: linear-gradient(180deg, rgba(34,197,94,1.0), rgba(22,163,74,0.98));
      box-shadow: 0 10px 28px rgba(34,197,94,0.22);
    }

    .btn-false {
      border-color: rgba(239,68,68,0.75);
      background: linear-gradient(180deg, rgba(239,68,68,1.0), rgba(220,38,38,0.98));
      box-shadow: 0 10px 28px rgba(239,68,68,0.20);
    }

    .btn-next {
      margin-left: auto;
      border-color: rgba(96,165,250,0.80);
      background: linear-gradient(180deg, rgba(96,165,250,0.98), rgba(59,130,246,0.98));
      box-shadow: 0 10px 28px rgba(96,165,250,0.22);
    }

    .btn-soft {
      background: rgba(255,255,255,0.12);
      border-color: rgba(255,255,255,0.22);
      font-weight: 800;
    }

    .result {
      margin-top: 16px;
      padding: 16px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.18);
      background: rgba(255,255,255,0.08);
      display: none;
    }

    .tag {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-weight: 900;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .tag .dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: var(--accent2);
      display: inline-block;
    }

    .tag.good { color: var(--green2); }
    .tag.good .dot { background: var(--green2); }

    .tag.bad { color: var(--red2); }
    .tag.bad .dot { background: var(--red2); }

    .explain {
      color: rgba(255,255,255,0.95);
      font-size: 17px;
      line-height: 1.65;
    }

    .correction {
      margin-top: 12px;
      padding: 12px 12px;
      border-left: 4px solid rgba(96,165,250,0.98);
      background: rgba(96,165,250,0.16);
      border-radius: 12px;
      color: rgba(255,255,255,0.98);
      font-size: 17px;
      line-height: 1.6;
    }

    .footerhint { margin-top: 16px; color: var(--muted2); font-size: 13px; }

    .end {
      display: none;
      margin-top: 16px;
      padding: 18px 16px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.20);
      background: rgba(0,0,0,0.22);
    }

    .end h2 { margin: 0 0 8px 0; font-size: 20px; }

    .end .score {
      font-size: 28px;
      font-weight: 950;
      margin: 6px 0 12px 0;
      color: rgba(255,255,255,0.99);
    }

    .end .motto { color: var(--muted); font-size: 17px; line-height: 1.65; }

    @media (max-width: 520px) {
      .btn-next { margin-left: 0; width: 100%; }
      .actions { gap: 10px; }
      .statement { font-size: 21px; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Halbleiter ‚Äì Was kann ich schon?</h1>
        <div class="subtitle">
          Eine Aussage, eine Entscheidung: <strong>Richtig</strong> oder <strong>Falsch</strong>. Direkt danach bekommst du die L√∂sung mit kurzer Erkl√§rung ‚Äì und (falls n√∂tig) eine saubere Korrektur.
        </div>
      </div>
      <div class="pillrow">
        <div class="pill" id="pillSection">‚Äì</div>
        <div class="pill" id="pillIndex">Aussage 1</div>
        <div class="pill" id="pillScore">Score: 0</div>
      </div>
    </header>

    <div class="card">
      <div class="topbar">
        <div class="progresswrap">
          <div class="progressline"><div class="bar" id="bar"></div></div>
          <div class="progressmeta">
            <span id="progressLeft">Frage 1 von 4</span>
            <span id="progressRight">0% erledigt</span>
          </div>
        </div>
        <div class="controls">
          <label class="toggle" title="Wenn aktiv, wird die Reihenfolge bei jedem Neustart gemischt.">
            <input type="checkbox" id="shuffleToggle" />
            Shuffle
          </label>
          <button class="btn btn-soft" id="btnRestart" onclick="restart(true)">Neu starten</button>
        </div>
      </div>

      <div class="statement" id="question">‚Äì</div>

      <div class="actions">
        <button class="btn btn-true" id="btnTrue" onclick="answer(true)">Richtig</button>
        <button class="btn btn-false" id="btnFalse" onclick="answer(false)">Falsch</button>
        <button class="btn btn-next" id="btnNext" onclick="nextQuestion()" disabled>N√§chste ‚Üí</button>
      </div>

      <div class="result" id="result"></div>

      <div class="end" id="end">
        <h2>Fertig üéâ</h2>
        <div class="score" id="endScore">‚Äì</div>
        <div class="motto" id="endMotto">‚Äì</div>
        <button class="btn btn-soft" onclick="restart(true)">Nochmal spielen</button>
      </div>

      <div class="footerhint">
        Tipp: Wenn du ‚ÄûFalsch‚Äú w√§hlst, formuliere die Aussage kurz korrekt um (1 Satz) ‚Äì das bringt den gr√∂√üten Lerneffekt.
      </div>
    </div>
  </div>

  <script>
    // ‚úÖ Fragen erweitern: Einfach weitere Objekte in dieses Array einf√ºgen.
    // Formeln: Nutze HTML mit <span class="math">E<sub>F</sub></span>, <span class="math">J<sub>Drift</sub></span>, <span class="math">E<sub>g</sub></span> usw.

    const BASE_QUESTIONS = [
      /*=========================
      BANDSTRUKTUR
      =========================*/

      {
      section: "Bandstruktur",
      text: "Ein Halbleiter besitzt eine Bandl√ºcke <span class=\"math\">E<sub>g</sub></span> zwischen Valenz- und Leitungsband.",
      correct: true,
      explanation: "Definition eines Halbleiters: verbotener Energiebereich zwischen den B√§ndern.",
      correction: "Merksatz: <span class=\"math\">E<sub>g</sub></span> trennt Valenz- und Leitungsband."
      },

      {
      section: "Bandstruktur",
      text: "Die Bandl√ºcke <span class=\"math\">E<sub>g</sub></span> entsteht durch Dotierung.",
      correct: false,
      explanation: "Dotierung verschiebt das Fermi-Niveau, nicht die Bandstruktur.",
      correction: "Bandl√ºcken entstehen durch das periodische Gitterpotential."
      },

      {
      section: "Bandstruktur",
      text: "Im Metall liegt das Fermi-Niveau <span class=\"math\">E<sub>F</sub></span> innerhalb eines Bandes.",
      correct: true,
      explanation: "Es existieren freie Zust√§nde bei <span class=\"math\">E<sub>F</sub></span> ‚Üí hohe Leitf√§higkeit."
      },

      /* =========================
        FERMI-DIRAC
      ========================= */

      {
      section: "Fermi-Dirac",
      text: "Die Fermi-Dirac-Verteilung <span class="math">f(E)=1/(1+exp((E‚àíE<sub>F</sub>)/(kT)))</span> beschreibt die Besetzungswahrscheinlichkeit eines Zustands.",
      correct: true,
      explanation: "Sie gibt die Wahrscheinlichkeit an, dass ein Zustand der Energie E besetzt ist."
      },

      {
      section: "Fermi-Dirac",
      text: "Bei <span class=\"math\">T=0 K</span> gilt <span class=\"math\">f(E)=1</span> f√ºr alle Energien.",
      correct: false,
      explanation: "Nur f√ºr <span class=\"math\">E&lt;E<sub>F</sub></span> ist f(E)=1.",
      correction: "Bei <span class=\"math\">T=0</span> ist f(E)=1 unterhalb von <span class=\"math\">E<sub>F</sub></span> und 0 oberhalb."
      },

      {
      section: "Fermi-Dirac",
      text: "Bei <span class=\"math\">E=E<sub>F</sub></span> gilt stets <span class=\"math\">f(E)=0,5</span>.",
      correct: true,
      explanation: "Unabh√§ngig von der Temperatur ist die Besetzungswahrscheinlichkeit dort 50 %."
      },

      /* =========================
        INTRINSISCH
      ========================= */

      {
      section: "Intrinsisch",
      text: "Im intrinsischen Halbleiter gilt <span class=\"math\">n=p=n<sub>i</sub></span>.",
      correct: true,
      explanation: "Elektronen und L√∂cher entstehen paarweise."
      },

      {
      section: "Intrinsisch",
      text: "Die intrinsische Ladungstr√§gerdichte <span class=\"math\">n<sub>i</sub></span> steigt exponentiell mit der Temperatur.",
      correct: true,
      explanation: "Thermische Anregung √ºber <span class=\"math\">E<sub>g</sub></span> folgt einem Exponentialgesetz."
      },

      {
      section: "Intrinsisch",
      text: "Im intrinsischen Halbleiter liegt <span class=\"math\">E<sub>F</sub></span> nahe dem Leitungsband.",
      correct: false,
      explanation: "Im intrinsischen Material liegt <span class=\"math\">E<sub>F</sub></span> nahe der Bandmitte."
      },

      /* =========================
        MASSENWIRKUNGSGESETZ
      ========================= */

      {
      section: "Massenwirkungsgesetz",
      text: "Im thermischen Gleichgewicht gilt <span class=\"math\">n¬∑p = n<sub>i</sub><sup>2</sup></span>.",
      correct: true,
      explanation: "Das ist das Massenwirkungsgesetz."
      },

      {
      section: "Massenwirkungsgesetz",
      text: "Wenn <span class=\"math\">n</span> steigt, steigt auch <span class=\"math\">p</span>.",
      correct: false,
      explanation: "Da <span class=\"math\">n¬∑p</span> konstant ist, sinkt p.",
      correction: "Erh√∂ht man n, muss p entsprechend kleiner werden."
      },

      /* =========================
        DRIFT
      ========================= */

      {
      section: "Drift",
      text: "Die Driftstromdichte lautet <span class=\"math\">J = q¬∑n¬∑Œº¬∑E</span>.",
      correct: true,
      explanation: "Drift entsteht durch ein elektrisches Feld."
      },

      {
      section: "Drift",
      text: "Ohne elektrisches Feld ist <span class=\"math\">J<sub>Drift</sub></span> gleich null.",
      correct: true,
      explanation: "Drift ben√∂tigt ein Feld."
      },

      {
      section: "Drift",
      text: "Eine gr√∂√üere Mobilit√§t <span class=\"math\">Œº</span> f√ºhrt zu kleinerem Strom.",
      correct: false,
      explanation: "Gr√∂√üere Œº erh√∂ht den Driftstrom.",
      correction: "Je gr√∂√üer Œº, desto gr√∂√üer J bei gleichem Feld."
      },

      /* =========================
        DIFFUSION
      ========================= */

      {
      section: "Diffusion",
      text: "Diffusion entsteht durch Konzentrationsgradienten.",
      correct: true,
      explanation: "Tr√§ger bewegen sich statistisch vom hohen zum niedrigen Konzentrationsbereich."
      },

      {
      section: "Diffusion",
      text: "Diffusion ben√∂tigt ein elektrisches Feld.",
      correct: false,
      explanation: "Diffusion ist feldunabh√§ngig."
      },

      {
      section: "Gesamtstrom",
      text: "Es gilt <span class=\"math\">J<sub>ges</sub>=J<sub>Drift</sub>+J<sub>Diff</sub></span>.",
      correct: true,
      explanation: "Gesamtstrom ist Summe beider Beitr√§ge."
      },

      {
      section: "Gleichgewicht",
      text: "Im thermischen Gleichgewicht gilt <span class=\"math\">J<sub>ges</sub>=0</span>.",
      correct: true,
      explanation: "Drift und Diffusion kompensieren sich."
      },

      /* =========================
        PN-√úBERGANG
      ========================= */

      {
      section: "pn-√úbergang",
      text: "Im Gleichgewicht ist <span class=\"math\">E<sub>F</sub></span> √ºber den gesamten pn-√úbergang konstant.",
      correct: true,
      explanation: "Fermi-Niveau ist im Gleichgewicht √ºberall gleich."
      },

      {
      section: "pn-√úbergang",
      text: "Die Raumladungszone enth√§lt viele freie Elektronen.",
      correct: false,
      explanation: "Dort befinden sich kaum freie Tr√§ger.",
      correction: "Es bleiben ortsfeste Ionen zur√ºck."
      },

      {
      section: "pn-√úbergang",
      text: "Das interne elektrische Feld wirkt der Diffusion entgegen.",
      correct: true,
      explanation: "Es erzeugt einen entgegengesetzten Driftstrom."
      },

      /* =========================
        DIODE
      ========================= */

      {
      section: "Diode",
      text: "Eine Vorw√§rtsspannung senkt die Potentialbarriere.",
      correct: true,
      explanation: "Dadurch steigt der Strom exponentiell an."
      },

      {
      section: "Diode",
      text: "Der Sperrstrom wird durch Mehrheitstr√§ger verursacht.",
      correct: false,
      explanation: "Sperrstrom h√§ngt an Minderheitstr√§gern.",
      correction: "Mehrheitstr√§ger sind gesperrt."
      },

      /* =========================
        OPTOELEKTRONIK
      ========================= */

      {
      section: "Optoelektronik",
      text: "Die Photonenenergie einer LED entspricht ungef√§hr <span class=\"math\">E<sub>g</sub></span>.",
      correct: true,
      explanation: "Rekombination setzt Energie ~ Bandl√ºcke frei."
      },

      {
      section: "Optoelektronik",
      text: "Ein direkter Halbleiter eignet sich besser f√ºr LEDs als ein indirekter.",
      correct: true,
      explanation: "Direkte Rekombination ohne Phonon."
      },

      {
      section: "Optoelektronik",
      text: "In einer Photodiode erzeugt Licht Elektron-Loch-Paare.",
      correct: true,
      explanation: "Innerer Photoeffekt."
      }

  

    ];

    let questions = [];
    let current = 0;
    let score = 0;
    let answered = false;

    function $(id) { return document.getElementById(id); }

    function shuffleArray(arr) {
      const a = [...arr];
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function initQuestions(shouldShuffle) {
      questions = shouldShuffle ? shuffleArray(BASE_QUESTIONS) : [...BASE_QUESTIONS];
    }

    function updateHeader() {
      $("pillSection").innerText = questions[current]?.section ?? "‚Äì";
      $("pillIndex").innerText = `Aussage ${Math.min(current + 1, questions.length)} / ${questions.length}`;
      $("pillScore").innerText = `Score: ${score}`;

      const p = Math.round((current / questions.length) * 100);
      $("progressLeft").innerText = `Frage ${Math.min(current + 1, questions.length)} von ${questions.length}`;
      $("progressRight").innerText = `${p}% erledigt`;
      $("bar").style.width = `${p}%`;
    }

    function showQuestion() {
      answered = false;
      $("result").style.display = "none";
      $("result").innerHTML = "";
      $("end").style.display = "none";

      $("btnTrue").disabled = false;
      $("btnFalse").disabled = false;
      $("btnNext").disabled = true;

      $("question").innerHTML = questions[current].text;
      updateHeader();
    }

    function answer(choice) {
      if (answered) return;
      answered = true;

      const q = questions[current];
      const ok = (choice === q.correct);
      if (ok) score += 1;

      $("pillScore").innerText = `Score: ${score}`;

      const tagClass = ok ? "tag good" : "tag bad";
      const tagText = ok ? "Deine Antwort ist korrekt" : "Deine Antwort ist nicht korrekt";
      const solutionText = q.correct ? "Richtig" : "Falsch";
      const dot = "<span class='dot'></span>";

      const corrLabel = q.correct ? "Merksatz" : "Physikalisch richtige Formulierung";
      const corrBlock = q.correction
        ? `<div class='correction'><strong>${corrLabel}:</strong><br>${q.correction}</div>`
        : "";

      $("result").innerHTML = `
        <div class='${tagClass}'>${dot}${tagText}</div>
        <div class='explain'><strong>L√∂sung:</strong> ${solutionText}<br><br>${q.explanation}</div>
        ${corrBlock}
      `;
      $("result").style.display = "block";

      $("btnTrue").disabled = true;
      $("btnFalse").disabled = true;
      $("btnNext").disabled = false;
    }

    function finish() {
      $("bar").style.width = "100%";
      $("progressRight").innerText = "100% erledigt";

      const total = questions.length;
      $("endScore").innerText = `${score}/${total} richtig`;

      const ratio = score / total;
      let motto = "";
      if (ratio === 1) {
        motto = "Stark! Das sitzt. Als n√§chstes: Banddiagramme skizzieren (intrinsisch, n/p-dotiert, pn-√úbergang).";
      } else if (ratio >= 0.75) {
        motto = "Sehr gut! Jetzt gezielt die 1‚Äì2 wackligen Konzepte festziehen ‚Äì dann bist du pr√ºfungsbereit.";
      } else if (ratio >= 0.5) {
        motto = "Guter Zwischenstand. Tipp: Wiederhole Bandkanten + Fermi-Niveau + Drift/Diffusion (Gleichgewicht).";
      } else {
        motto = "Alles gut ‚Äì genau daf√ºr ist das Tool da. Mach eine zweite Runde und schreibe bei jeder falschen Aussage die korrekte Formulierung hin.";
      }
      $("endMotto").innerText = motto;

      $("end").style.display = "block";
      $("btnNext").disabled = true;

      $("pillSection").innerText = "Ergebnis";
      $("pillIndex").innerText = `Aussage ${questions.length} / ${questions.length}`;
      $("progressLeft").innerText = `Fertig`;
    }

    function nextQuestion() {
      if (!answered) return;
      if (current < questions.length - 1) {
        current += 1;
        showQuestion();
      } else {
        $("question").innerHTML = "Du hast alle Aussagen bearbeitet.";
        $("result").style.display = "none";
        $("btnTrue").disabled = true;
        $("btnFalse").disabled = true;
        finish();
      }
    }

    function restart(keepToggle) {
      const shouldShuffle = $("shuffleToggle").checked;
      initQuestions(shouldShuffle);
      current = 0;
      score = 0;
      $("bar").style.width = "0%";
      if (!keepToggle) $("shuffleToggle").checked = false;
      showQuestion();
    }

    // Start
    initQuestions(false);
    showQuestion();
  </script>
</body>
</html>
